{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
       "adminUsername":{
           "reference": {
             "keyVault":{
                "id":"/subscriptions/60dd9fa3-8b3f-46cc-bcdb-438efcbf1939/resourceGroups/rg-007-szkolachmury-dev-001/providers/Microsoft.KeyVault/vaults/szkolachmury"
                },
                "secretName":"AdminLogin"
            }
        },
         "adminPasswordOrKey":{
           "reference": {
             "keyVault":{
                "id":"/subscriptions/60dd9fa3-8b3f-46cc-bcdb-438efcbf1939/resourceGroups/rg-007-szkolachmury-dev-001/providers/Microsoft.KeyVault/vaults/szkolachmury"
                },
                "secretName":"AdminPassword"
            }
        }
    },
    "variables": {},
    "resources": [
        {
            "type":"Microsoft.Resources/deployments",
            "apiVersion":"2017-05-10",
            "name":"nsg",
            "properties":{
                "mode":"Incremental",
                "templateLink":{
                    "uri":"https://raw.githubusercontent.com/ostalski1992/AzureArchitect/master/Week3/3.4/01-nsg.json",
                    "contentVersion":"1.0.0.0"
                } 
            }

        },    
        {
            "type":"Microsoft.Resources/deployments",
            "apiVersion":"2017-05-10",
            "name":"vnet",
            "properties":{
                "mode":"Incremental",
                "templateLink":{
                    "uri":"https://raw.githubusercontent.com/ostalski1992/AzureArchitect/master/Week3/3.4/02-vnet.json",
                    "contentVersion":"1.0.0.0"
                } 
            },
            "dependsOn":["nsg"]

        },   
        {
            "type":"Microsoft.Resources/deployments",
            "apiVersion":"2017-05-10",
            "name":"vm1",
            "properties":{
                "mode":"Incremental",
                "templateLink":{
                    "uri":"https://raw.githubusercontent.com/ostalski1992/AzureArchitect/master/Week3/3.4/03-vm1.json",
                    "contentVersion":"1.0.0.0"
                } 
            },
            "dependsOn":["vnet"]

        }
                
    ],
    "outputs": {},
    "functions": []
}
